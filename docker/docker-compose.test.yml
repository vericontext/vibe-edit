version: '3.8'

services:
  vibeframe-test:
    build:
      context: ..
      dockerfile: docker/Dockerfile.test
    container_name: vibeframe-test
    stdin_open: true
    tty: true
    environment:
      # API keys - pass from host environment
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY}
      - ELEVENLABS_API_KEY=${ELEVENLABS_API_KEY}
      - STABILITY_API_KEY=${STABILITY_API_KEY}
      - RUNWAY_API_SECRET=${RUNWAY_API_SECRET}
      - KLING_API_KEY=${KLING_API_KEY}
      - REPLICATE_API_TOKEN=${REPLICATE_API_TOKEN}
    volumes:
      # Mount test media files
      - ./test-media:/test/media:ro
      # Mount output directory
      - ./test-output:/test/output
    working_dir: /test
